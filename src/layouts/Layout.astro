---
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";
interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/webp" href="/Logo/logodesktop.webp" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />
  </head>
  <body class="relative text-black dark:text-white">
    <Navbar />
    <slot />
    <Footer />
  </body>
  <style is:global>
    /* Estado inicial: oculto y un poco abajo */
    html,
    body {
      overflow-x: hidden;
    }
    [data-reveal] {
      opacity: 0;
      transform: translateY(26px);
      transition:
        opacity 0.6s ease-out,
        transform 0.6s ease-out;
      will-change: opacity, transform;
    }

    /* Cuando entra en pantalla */
    [data-reveal].is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Variante con “flash” suave */
    [data-reveal="flash"].is-visible {
      animation: section-flash 0.7s ease-out;
    }

    @keyframes section-flash {
      0% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.3);
        transform: scale(0.99);
      }
      50% {
        box-shadow: 0 0 0 12px rgba(37, 99, 235, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
        transform: scale(1);
      }
    }
  </style>

  <script is:inline>
    (function () {
      const items = document.querySelectorAll("[data-reveal]");
      if (!items.length) return;

      const prefersReduced =
        window.matchMedia &&
        window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      if (prefersReduced) {
        // Si el usuario prefiere menos animaciones, mostramos todo sin efecto
        items.forEach((el) => el.classList.add("is-visible"));
        return;
      }

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add("is-visible");
            observer.unobserve(entry.target);
          });
        },
        {
          threshold: 0.2,
          rootMargin: "0px 0px -10% 0px", // dispara un poco antes de llegar al centro
        }
      );

      items.forEach((el) => observer.observe(el));
    })();
  </script>
</html>
